[![Discord Mine](https://img.shields.io/discord/807380182729228298?label=chat&logo=discord&logoColor=white)](https://discord.gg/VYZuWRMQ8u)
[![GitHub All Releases](https://img.shields.io/github/downloads/moom0o/AnarchyExploitFixes/total.svg)](https://github.com/moom0o/AnarchyExploitFixes/releases/)

# AnarchyExploitFixes

Fix exploits on a Minecraft Anarchy Server

[![bstats](https://bstats.org/signatures/bukkit/AnarchyExploitFixes.svg)](https://bstats.org/plugin/bukkit/AnarchyExploitFixes/8700)

## Requirements

* ProtocolLib - This is for preventing packet exploits, if it's not present these exploits will not be prevented, and
  you will get a warning message.

## Prebuilt jar

### Go to releases, download the latest jar

If you wish to have a prebuilt BETA jar with the latest code, click Actions at the top of the page, click the
latest build, and download the artifact.

## Building from source

`git clone https://github.com/moom0o/AnarchyExploitFixes.git`

Run `mvn package`

## Servers using AEF:

Add your server in a pull request

constantiam.net (70-80), 5b5t.org (50-150), openanarchy.org (40-150), scfanarchy.ggs.gg (0-3), german-anarchy.org (4-16)
mc.22b22t.tk (8-40), 2l2c.org (10-70)

## Commands

These commands can only be executed from console or by opped players.

* /aef reload - Reload the config
* /aef datavalue - (1.12 Relevant) Get the data value for the item you're holding to add it to the remove list
* /aef elytra - See who is flying on an elytra.
* /aef geared - See how many players have armor or are new.
* /aef lag - artificially lag the server for testing. Every time you run the command the server freezes for 1 second by
  default, add milliseconds to the end of the command for custom time.
* /aef version - Plugin version.
* /aef config - Show enabled/disabled config options.
* /aef kickphrase phrase - Kick players that have said a certain phrase (case insensitive).

## Donate

You can send bitcoin to `3DJan1GpSkhiWHYec55xKhchZC8NeC829S`

You can send Monero to `49aXC8ZatrK4MrQXeSpUGsYk5HKLpeuhTZKMW8MtXuXxhNob8rQQBrkRj471Zv4ZNoCu6teYwsMy42HznLp6grCt1AUDCrW`

You can also send gift cards, contact me on Discord.

## Contact

Need to let me know of any exploits in private? Contact me on discord: `moo#0529` or email `moom0o@protonmail.com`

## Notice

Please note that some exploits have already been patched
by [2LS ExploitFixer](https://builtbybit.com/resources/exploitfixer-ultimate-anticrasher.26463/), [Panilla](https://www.spigotmc.org/resources/panilla-prevent-hacked-items.65694/), [LagAssist](https://www.spigotmc.org/resources/lagassist-%E2%9A%A1-advanced-performance-solution-%E2%9A%A1-1-8-1-19-x-compatible.56399/)
and [Papaya (My paper fork)](https://github.com/moom0o/Papaya), meaning they are most likely not included in AEF. 
I recommend using those alongside AEF to patch the majority of exploits.

## Features

**This list does not include all features, check the config for all features!**

**All features listed here can be disabled or enabled in the config.**

* Prevent NoCom exploit. - Prevent the 'NoCom' coordinate exploit
* Prevent a new lag exploit where fireworks can bring tps down to single digits.
* Prevent BowBomb exploit. - Prevent an exploit where bows can instantly kill a player.
* Prevent Burrow hack - Where you step inside a block so crystals can't do any damage.
* Prevent BoatFly exploit - Prevent the Futureclient / Rusherhack BoatFly exploit.
* Prevent Book-ban - All characters still work! The size of each page is just limited to 255 bytes (customizable). This
  allows to fill the whole page with latin characters. Characters that use more bytes such as Chinese may be limited in
  length.
* Prevent unbreakable Packet elytra fly.
* Prevent PacketFly exploit.
* Prevent end gateway crash exploit. - https://www.youtube.com/watch?v=c5nVBQeYo-I
* Patch end portal dupe. - https://www.youtube.com/watch?v=n-fN6txZNgc
* Prevent Y256 dispenser crash exploit. - https://www.youtube.com/watch?v=XL17P87O6xA
* Anti-Illegal system: 
  - Remove/revert illegal items: banned items, overstacked items, higher enchanted items, items with illegal datavalues,
    incompatible enchanted items (eg Silk Touch & Fortune on the same item), inapplicable enchanted items (unenchantables),
    Spawneggs and unbreakable items and all shulkers containing them.
  - Remove illegal blocks that have been placed in the world. Supports removal of non-natural spawners too!
* Limit speed of snowballs to prevent clientside lag.
* Limit crafting table autorecipe speed to prevent a lag exploit.
* Prevent all coordinate exploits related to teleporting by vanishing a player right before they are teleported.
* Prevent destroying end portal frames.
* Prevent multiple end dragons from being created.
* Prevent portal traps - Teleport a player back to the original portal if they're trapped for too long.
* Automatically fill in the bedrock floor/roof if the bedrock has been broken.
* Prevent players from going below the bedrock floor by teleporting them up. - Useful so people can't elytra fly below
  the world.
* Remove wither heads automatically to prevent lag. - Removes on chunk load, unload or after a customizable alive time
* Option to disable wither spawning at spawn. - Disabled by default.
* Prevent chunk ban exploit. - Checks how much of each block is in a chunk.
* Prevent chat spam. - Delay between messages, Max messages per a certain time, separate link delay, character limit,
  and more!
* Prevent god mode exploit. - Prevent most godmode exploits, please note, there could still be bypasses.
* Prevent invalid names. - Disallow login from players with invalid characters/too long of a name.
* Prevent command signs. - Prevent players from right-clicking signs that have been placed with a command attached. For
  example, from a backdoor.
* Limit falling blocks per chunk to prevent lag.
* Limit exp bottles per chunk to prevent lag.
* Prevent projectiles from going through portals, shooting projectiles through portals can get them stuck in the same
  place on the other side, once they are loaded the server can crash.
* Prevent too many vehicles (eg. minecarts, boats) in chunks.
* Prevent bed-traps. - Disabled by default. Teleports players back to original location when they have been standing in
  a portal for too long.
* Prevent nether roof access. - Disabled by default.
* Prevent placing blocks on nether roof
* Option to disable chests on donkeys. - This is unlike IllegalStack's, no items will drop if the chest is broken.
  Useful to prevent many dupe exploits, Disabled by default.
* Option to prevent donkeys from going through portals. - Useful to prevent many dupe exploits, disabled by default.
* Option to mask all kick messages. - Change every kick message to "You have lost connection to the server", or
  whichever you specify. Disabled by default.
* Option to enable first join message. - Disabled by default.
* Command whitelist - Useful for only allowing commands that you want to be allowed, so players can't find your plugins.
  Disabled by default.
* Elytra speed limits for old and new chunks, and bursting settings for when tps is high.
* Elytra action bar to show players the speed they are going and speed limit.
* Rate-limit levers - Disabled by default. Prevent lag by spamming levers.
* Options to disable certain game features at specific TPS. Redstone, Elytra, Explosions, Falling Blocks.
* Bedrock Filler - Option to automatically fill overworld bedrock floor, nether bedrock floor and nether bedrock ceiling.

## Config options

Missing config options will now automatically add themselves with every update without the config resetting.

This config was created on a 1.19.3 server, default entries will vary based on server version.

<details>
  <summary>config.yml</summary>

```yml

config-version: 1.0

##############
#  Language  #
##############
language:
  # The default language that will be used if auto-language is false or no matching language file was found.
  default-language: en_us
  # If set to true, will display messages based on client language
  auto-language: true

#############
#  General  #
#############
general:
  # Use only if you are having problems with ProtocolLib when starting the plugin.
  disable-all-ProtocolLib: false
  # The Y-level at which the nether ceiling generates the last layer of bedrock on your server.
  nether-ceiling-y: 127
  # The Y-level at which the nether floor generates the last layer of bedrock on your server.
  nether-floor-y: 0
  # The Y-level at which the overworld floor generates the last layer of bedrock on your server.
  overworld-floor-y: -64

#############
#  Patches  #
#############
patches:
  prevent-book-ban:
    enable: true
    max-byte-size-per-page: 255
  prevent-bow-bomb:
    enable: true
    # Fully pulled bow is ~9-10. 15 is default just to be safe.
    max-bow-squared-velocity: 15
  prevent-burrow:
    enable: true
    # 1.0 = Half a heart of damage every time you move.
    damage-when-moving: 1.0
    teleport-above-block: true
    # Prevent burrow even if there is a block above the block they are burrowing in, please note this may allow creating an "elevator", players will keep teleporting up until they hit air
    prevent-if-block-above-burrow: false
    break-anvil-instead-of-teleport: true
    # Disabled by default in 1.12, needs to be enabled to prevent a bug where players are teleported above a slab when the slab is underwater, only happens in newer versions.
    allow-slabs-in-burrow: true
  # Will have the side effect of players being unable to dye signs in newer versions.
  prevent-command-sign: false
  prevent-destroying-end-portals:
    enable: true
    log: true
  # Removes entities or players if they are "invalid". Not sure if this works.
  experimental-godmode-patch: false
  prevent-invalid-username-joins:
    # Prevent usernames with characters that are non letters, numbers, or underscores, or too long/too short.
    enable: false
    log: true
    # Only enable if you're using floodgate and are experiencing problems.
    exempt-floodgate-players: false
  prevent-teleport-coordinate-exploit:
    # Patches coordinate exploit for teleportation commands such as /tpa, /home AS WELL as respawn exploits
    # such as finding location from bed respawn point. Works by vanishing the player for x ticks before teleporting.
    enable: true
    min-distance-to-vanish-player: 100
    teleport-vanish-time-in-ticks: 10
  crash-exploits:
    prevent-dispenser-crash:
      # Prevents dispensers from crashing the server when dispensing items out of bounds: https://www.youtube.com/watch?v=XL17P87O6xA
      enable: true
      log: true
    prevent-end-gateway-crash:
      # Prevents a crash exploit involving boats and end gateways: https://www.youtube.com/watch?v=c5nVBQeYo-I
      enable: true
      log: true
    prevent-multiple-enderdragons:
      enable: true
      log: true
  prevent-snowball-exploit:
    # Patches a lag exploit.
    enable: false
    projectile-max-per-time: 3
    projectile-time-in-ticks: 10
  prevent-lever-spam:
    # Rate Limit levers to prevent a lag exploit.
    enable: false
    show-actionbar: true
    kick-player: false
    # How many ticks a player needs to wait until he can use the lever again
    # 20 Ticks = 1 Second
    lever-delay-in-ticks: 20
  boatfly-patch:
    # Patches Futureclient / Rusherhack boat fly exploit.
    enable: true
    log: true
    max-entity-packets-per-10s: 15
    kick-player-if-boatflying: false
  prevent-nocom-coordinate-exploit:
    # Prevent the NoCom Coordinate exploit.
    enable: true
    nocom-max-distance: 64
  packetfly-patch:
    # Patches Futureclient / Rusherhack packet fly exploit.
    enable: true
    log: true
    max-teleport-packets-per-10s: 25
    kick-player-if-packetflying: false
  prevent-crafting-recipe-lag-exploit:
    # Prevent lagging the server by spamming the crafting recipe book.
    enable: true
    # How many ticks a player needs to wait to be able to use the crafting recipe book again
    crafting-recipe-delay-in-ticks: 5

#################
#  Preventions  #
#################
preventions:
  nether-portals:
    # only enable if you must. Does not affect players.
    prevent-all-entities-in-portals: false
    # Prevents some dupe exploits like the dolphin dupe or the allay dupe.
    prevent-dropped-items-in-portals: true
    # Prevents a lag exploit.
    prevent-fireworks-in-portals: true
    prevent-portal-traps:
      # Teleports a player back to the original location if they stand in a portal for too long.
      enable: false
      wait-time-until-tp-back-in-seconds: 10
    # Prevents a lag exploit. Might disable some chunk loader designs.
    prevent-projectiles-in-portals: false
  anti-bed-trap:
    # Resets Bed Respawn when a player dies too many times within a certain timeframe.
    enable: true
    log: false
    # Amount of times player can die until he is determined as bed-trapped.
    death-amount: 4
    # If the player dies x times within 30 seconds his bed will reset.
    check-time-in-seconds: 30
  prevent-ambient-fish-spawns:
    # Prevent certain fish types from spawning in newer versions to combat lag.
    enable: false
    fish-types-to-prevent:
      - COD
      - SALMON
      - PUFFERFISH
      - TROPICAL_FISH
  prevent-nether-roof:
    # Prevent players from going above the nether roof.
    enable: true
  prevent-non-survival-players:
    # Checks if player is in survival and puts him back into survival if not, Useful if you had a backdoor incident.
    enable: false
    log: true
    whitelisted-players:
      - Notch
  prevent-opped-players:
    # Useful if you suspect a backdoored plugin.
    enable: false
    log: true
    whitelisted-players:
      - Notch
  withers:
    # Prevents wither skulls from being launched.
    disable-withers-from-shooting-skulls: false
    remove-flying-wither-skulls:
      # Enable if a lot of wither skulls at spawn are causing lag.
      remove-all-flying-skulls: false
      if-lived-longer-than-x-ticks:
        # Remove wither skulls that have been flying for too long to prevent them from causing lag.
        enable: true
        # 200 Ticks = 10 Seconds
        max-age-in-ticks: 200
      # Removes wither skulls when the chunk gets loaded. Use if you have a ton of them at spawn and they are causing lag.
      on-chunk-load: true
      # Removes wither skulls when the chunk gets unloaded. Use if you have a ton of them at spawn and they are causing lag.
      on-chunk-unload: true
    disable-wither-spawning-at-spawn:
      # Only enable if you must.
      enable: false
      inform-players: true
      worlds:
        world: 5000
        world_the_end: 5000
        world_nether: 5000

#####################
#  Lag Preventions  #
#####################
lag-preventions:
  disable-physics-during-low-tps:
    explosions:
      # Disable explosions during low tps to combat lag.
      enable: false
      disable-TPS: 14.0
      log: false
    block-physics:
      # Stop block physics (like falling blocks) when the TPS gets below a certain value.
      enable: false
      disable-TPS: 16.0
      log: false
    liquid-spread:
      # Prevents liquid spread lag: https://www.youtube.com/watch?v=p1H14RQSic8
      enable: false
      disable-TPS: 16.0
      log: false
    melting-blocks:
      enable: false
      disable-TPS: 16.0
      log: false
    redstone:
      # Disable Redstone during low TPS to prevent some lag machines.
      enable: false
      disable-TPS: 16.0
      log: false
    noteblocks:
      enable: false
      disable-TPS: 16.0
      log: false
    fire-spread:
      enable: false
      disable-TPS: 16.0
      log: false
    grass-spread:
      enable: false
      disable-TPS: 16.0
      log: false
    leave-decay:
      enable: false
      disable-TPS: 16.0
      log: false

######################
#  Dupe Preventions  #
######################
dupe-preventions:
  # Attempts to prevent dupes involving chested entities and portals.
  prevent-chested-living-entities-in-portals: true
  # Prevents a dupe exploit involving donkeys.
  prevent-chests-on-living-entities: false
  # Patches https://www.youtube.com/watch?v=RLvErqzeK3Y
  prevent-end-portal-dupe: true
  # Not sure if this works, please try it.
  experimental-dupe-patch-1: false
  # Not sure if this works, someone on discord said I should prevent the mobs from de-spawning if they are 500 blocks near a player.
  # Automatically disabled in non 1.12 because it causes a SHIT ton of mobs to spawn: https://i.imgur.com/f691cep.png and disabled by default in the config because a ton of enderman spawn.
  experimental-dupe-patch-2: false

##############
#  Illegals  #
##############
illegals:
  remove-placed-blocks:
    on-chunkload:
      # Remove illegally placed blocks on chunkload.
      enable: false
      # Enter PLAYER_HEAD here if you want to remove placed playerheads.
      # NOTE: ONLY applies to PLAYER_HEAD. For everything else you have to use correct Material enums for your Minecraft version.
      blocks-to-remove:
        - PLAYER_HEAD
        - CHAIN_COMMAND_BLOCK
        - COMMAND_BLOCK
        - COMMAND_BLOCK_MINECART
        - REPEATING_COMMAND_BLOCK
        - BEDROCK
        - BARRIER
      exempted-worlds:
        - exampleworld1
        - exampleworld2
      pause-on-low-TPS: true
      pause-TPS: 14.0
    periodically:
      enable: false
      # Enter PLAYER_HEAD here if you want to remove placed playerheads.
      # NOTE: ONLY applies to PLAYER_HEAD. For everything else you have to use correct Material enums for your Minecraft version.
      blocks-to-remove:
        - PLAYER_HEAD
        - CHAIN_COMMAND_BLOCK
        - COMMAND_BLOCK
        - COMMAND_BLOCK_MINECART
        - REPEATING_COMMAND_BLOCK
        - BEDROCK
        - BARRIER
      exempted-worlds:
        - exampleworld1
        - exampleworld2
      check-period-in-seconds: 10
      pause-on-low-TPS: true
      pause-TPS: 14.0
  remove-unnatural-spawners-on-chunkload:
    enable: false
    pause-on-low-TPS: true
    pause-TPS: 14.0
    # You can add or remove as much world names here as you want.
    natural-spawner-types-per-world:
      world:
        - SKELETON
        - ZOMBIE
        - SILVERFISH
        - SPIDER
        - CAVE_SPIDER
      world_the_end:
        - SKELETON
        - SPIDER
      world_nether:
        - BLAZE
        - MAGMA_CUBE
  data-values:
    # 1.12 only.
    revert-illegal-golden-apples: false
    remove-items-with-specific-data-values:
      # 1.12 Only
      enable: false
      data-values:
        - SuperIllegalItem(0)
  remove-items-with-specific-names:
    enable: false
    item-names:
      - Super Insane Mega Sussy Item
  revert-overstacked-items:
    # Revert illegally high stacked items.
    enable: false
    item-whitelist-enabled: false
    use-as-blacklist-instead: false
    whitelisted-items:
      - TOTEM_OF_UNDYING
    periodically-check-player-inventories:
      enable: false
      check-period-in-ticks: 20
    delete-shulker-if-contains-overstacked: false
  revert-unbreakables:
    enable: false
    item-whitelist-enabled: false
    use-as-blacklist-instead: false
    # Make sure to keep enabled, otherwise netherite tools will mistakenly be set to maximum durability, due to some bug in spigot.
    skip-zero-durability: true
    whitelisted-items:
      - DIAMOND_CHESTPLATE
    periodically-check-player-inventories:
      enable: false
      check-period-in-ticks: 20
    delete-shulker-if-contains-unbreakable: false
  ban-specific-blocks:
    remove-items: true
    banned-blocks:
      - PLAYER_HEAD
      - CHAIN_COMMAND_BLOCK
      - COMMAND_BLOCK
      - COMMAND_BLOCK_MINECART
      - REPEATING_COMMAND_BLOCK
      - BEDROCK
      - BARRIER
      - STRUCTURE_BLOCK
      - STRUCTURE_VOID
      - END_PORTAL_FRAME
      - END_PORTAL
      - NETHER_PORTAL
      - LIGHT
    delete-shulker-if-contains-banned-block: false
    periodically-check-player-inventories:
      enable: false
      check-period-in-ticks: 20
    prevent-placing: true
  enchantments:
    revert-incompatible-enchants:
      # Reverts items like Armor with all Protection enchantments.
      enable: true
      item-whitelist-enabled: true
      use-as-blacklist-instead: false
      whitelisted-items:
        - BOW
      periodically-check-player-inventories:
        enable: false
        check-period-in-ticks: 20
    revert-higher-enchants:
      # Reverts 32ks / 255s
      enable: true
      item-whitelist-enabled: true
      use-as-blacklist-instead: false
      whitelisted-items:
        - GOLDEN_APPLE
      periodically-check-player-inventories:
        enable: false
        check-period-in-ticks: 20
      delete-shulker-if-contains-higher-enchant: false
    revert-specific-higher-enchants:
      enable: false
      enchantments:
        - DIG_SPEED
      item-whitelist-enabled: true
      use-as-blacklist-instead: false
      whitelisted-items:
        - GOLDEN_APPLE
      periodically-check-player-inventories:
        enable: false
        check-period-in-ticks: 20
      delete-shulker-if-contains-specific-higher-enchanted: false
    revert-inapplicable-enchants:
      enable: true
      item-whitelist-enabled: true
      use-as-blacklist-instead: false
      whitelisted-items:
        - GOLDEN_APPLE
      periodically-check-player-inventories:
        enable: false
        check-period-in-ticks: 20
      delete-shulker-if-contains-inapplicable-enchant: false
  ban-player-heads:
    # This deletes playerheads with and without owners
    enable: false
    delete-shulker-if-contains-player-head: false
    periodically-check-player-inventories:
      enable: false
      check-period-in-ticks: 20
    prevent-placing: true
  spawn-eggs:
    # Also prevents them from being used in combination with dispensers.
    prevent-using: false
    remove-spawn-eggs:
      enable: false
      delete-shulker-if-contains-spawn-egg: false

##################
#  Chunk Limits  #
##################
chunk-limits:
  block-limit:
    enable: false
    # Attempt to prevent ChunkBan / Client FPS Lag
    max-blocks-per-chunk:
      ZOMBIE_WALL_HEAD: 16
      CREEPER_HEAD: 16
      PIGLIN_HEAD: 16
      ACACIA_HANGING_SIGN: 8
      JUNGLE_WALL_HANGING_SIGN: 8
      BIRCH_WALL_HANGING_SIGN: 8
      ACACIA_WALL_SIGN: 8
      BLACK_BANNER: 12
      GREEN_WALL_BANNER: 12
      MAGENTA_BANNER: 12
      DRAGON_HEAD: 16
      BIRCH_WALL_SIGN: 8
      PURPLE_WALL_BANNER: 12
      SPRUCE_WALL_HANGING_SIGN: 8
      PINK_BANNER: 12
      TRAPPED_CHEST: 200
      CRIMSON_HANGING_SIGN: 8
      PISTON_HEAD: 32
      PLAYER_WALL_HEAD: 16
      CRIMSON_WALL_SIGN: 8
      ENDER_CHEST: 64
      BLACK_WALL_BANNER: 12
      ENCHANTING_TABLE: 16
      BIRCH_SIGN: 8
      BAMBOO_WALL_HANGING_SIGN: 8
      BIRCH_HANGING_SIGN: 8
      SPRUCE_HANGING_SIGN: 8
      PINK_WALL_BANNER: 12
      OAK_WALL_HANGING_SIGN: 8
      WARPED_WALL_HANGING_SIGN: 8
      STICKY_PISTON: 32
      OAK_WALL_SIGN: 8
      BROWN_BANNER: 12
      RED_BANNER: 12
      ZOMBIE_HEAD: 16
      BLUE_WALL_BANNER: 12
      ACACIA_WALL_HANGING_SIGN: 8
      GREEN_BANNER: 12
      LIGHT_GRAY_BANNER: 12
      CHEST: 500
      SPRUCE_SIGN: 8
      MANGROVE_SIGN: 8
      GRAY_WALL_BANNER: 12
      LIME_BANNER: 12
      SLIME_BLOCK: 128
      PLAYER_HEAD: 16
      JUNGLE_SIGN: 8
      WARPED_HANGING_SIGN: 8
      PIGLIN_WALL_HEAD: 16
      CREEPER_WALL_HEAD: 16
      BLUE_BANNER: 12
      BAMBOO_WALL_SIGN: 8
      OAK_HANGING_SIGN: 8
      LIGHT_BLUE_BANNER: 12
      DRAGON_WALL_HEAD: 16
      CYAN_WALL_BANNER: 12
      ACACIA_SIGN: 8
      OAK_SIGN: 8
      BEACON: 32
      BAMBOO_HANGING_SIGN: 8
      DARK_OAK_SIGN: 8
      LIGHT_GRAY_WALL_BANNER: 12
      YELLOW_WALL_BANNER: 12
      MAGENTA_WALL_BANNER: 12
      ORANGE_WALL_BANNER: 12
      BAMBOO_SIGN: 8
      DARK_OAK_HANGING_SIGN: 8
      PISTON: 32
      DARK_OAK_WALL_SIGN: 8
      GLOWSTONE: 5000
      MANGROVE_HANGING_SIGN: 8
      YELLOW_BANNER: 12
      BROWN_WALL_BANNER: 12
      CRIMSON_WALL_HANGING_SIGN: 8
      MANGROVE_WALL_HANGING_SIGN: 8
      ORANGE_BANNER: 12
      PURPLE_BANNER: 12
      MOVING_PISTON: 32
      DISPENSER: 100
      RED_WALL_BANNER: 12
      GRAY_BANNER: 12
      CYAN_BANNER: 12
      SPRUCE_WALL_SIGN: 8
      CRIMSON_SIGN: 8
      LIGHT_BLUE_WALL_BANNER: 12
      WARPED_SIGN: 8
      LIME_WALL_BANNER: 12
      DARK_OAK_WALL_HANGING_SIGN: 8
      JUNGLE_HANGING_SIGN: 8
      MANGROVE_WALL_SIGN: 8
      JUNGLE_WALL_SIGN: 8
      WARPED_WALL_SIGN: 8
  entity-limits:
    custom-limit:
      # Limit specific entity types per chunk.
      enable: false
      log-removals: true
      # check all chunks every x ticks.
      check-period-in-ticks: 20
      # Google EntityType Spigot-1.19 for the correct names.
      limited-types:
        WITHER: 16
        HORSE: 5
        CHICKEN: 10
        SKELETON_HORSE: 5
        COW: 10
        DONKEY: 5
    non-living-limit:
      # Limit the amount of non living entities in a chunk to prevent lag (does not affect items).
      enable: false
      log-removals: true
      max-non-living-per-chunk: 100
      # 20 ticks = 1 second
      check-period-in-ticks: 20
    dropped-item-limit:
      # Limit the amount of dropped items in a chunk to combat lag.
      # Be aware this does not prioritize higher value items.
      enable: false
      log-removals: true
      max-dropped-items-per-chunk: 200
      # 20 ticks = 1 second
      check-period-in-ticks: 20
      whitelist-specific-item-types: false
      # You need to use correct Material enums for your minecraft version here.
      whitelisted-types:
        - SHULKER_BOX
        - BLACK_SHULKER_BOX
        - BLUE_SHULKER_BOX
        - BROWN_SHULKER_BOX
        - CYAN_SHULKER_BOX
        - GRAY_SHULKER_BOX
        - GREEN_SHULKER_BOX
        - LIGHT_BLUE_SHULKER_BOX
        - LIGHT_GRAY_SHULKER_BOX
        - LIME_SHULKER_BOX
        - MAGENTA_SHULKER_BOX
        - ORANGE_SHULKER_BOX
        - PINK_SHULKER_BOX
        - PURPLE_SHULKER_BOX
        - RED_SHULKER_BOX
        - WHITE_SHULKER_BOX
        - YELLOW_SHULKER_BOX
  exp-bottle-limit:
    # Prevent having a shit ton of exp bottles in one chunk then loading it to kill the server.
    enable: true
    # Max in a chunk, doesn't limit the actual xp orbs.
    max-exp-bottle-per-chunk: 25
  falling-block-limit:
    # Prevent players from placing massive sand chunks and killing the server.
    enable: true
    log: false
    # Prevents any falling blocks from being placed if there is more than x falling blocks in a chunk.
    max-placeable-gravitiy-blocks-per-chunk: 200
    # Removes any falling block if there is more than x blocks (actively) falling in a chunk.
    max-falling-gravitiy-blocks-per-chunk: 60
  vehicle-limit:
    # Limit the amount of vehicles to prevent some lag machines involving boats and a dispenser,
    enable: false
    max-vehicles-per-chunk: 25
    # 200 ticks = 10 seconds.
    check-period-in-ticks: 200

#############
#  Bedrock  #
#############
bedrock:
  fill-in-bedrock:
    nether-ceiling:
      fill-on-chunkload:
        enable: false
        # Recommended to leave off. Only useful if world generation is broken for some reason.
        also-check-new-chunks: false
        pause-on-low-tps: true
        # The TPS at which bedrock filling will pause to avoid lag.
        pause-tps: 16.0
      # Case sensitive!
      exempted-worlds:
        - exampleworld
        - exampleworld2
      periodically-check-and-fill:
        enable: false
        check-period-in-seconds: 10
        pause-on-low-tps: true
        pause-tps: 16.0
    nether-floor:
      fill-on-chunkload:
        enable: false
        also-check-new-chunks: false
        pause-on-low-tps: true
        pause-tps: 16.0
      # Case sensitive!
      exempted-worlds:
        - exampleworld
        - exampleworld2
      periodically-check-and-fill:
        enable: false
        check-period-in-seconds: 10
        pause-on-low-tps: true
        pause-tps: 16.0
    overworld-floor:
      fill-on-chunkload:
        enable: false
        # Recommended to leave off. Only useful if world generation is broken for some reason.
        also-check-new-chunks: false
        # Pauses the task during low tps to avoid lag.
        pause-on-low-tps: true
        # The TPS at which bedrock filling will pause.
        pause-tps: 16.0
      # Case sensitive!
      exempted-worlds:
        - exampleworld
        - exampleworld2
      periodically-check-and-fill:
        # only checks loaded chunks
        enable: false
        check-period-in-seconds: 10
        pause-on-low-tps: true
        pause-tps: 16.0
  prevent-going-below-bedrock-floor:
    # Fills the bedrock hole and teleports player above.
    enable: true
    exempted-worlds:
      - world_the_end
      - skyblock_world

############
#  Elytra  #
############
elytra:
  # NOTE: Set nocheatplus horizontal elytra settings to 999999
  elytra-speed:
    # Display info in Actionbar while flying.
    display-actionbar: true
    # Inform flying player if they are in old or new chunks.
    display-chunk-info-in-actionbar: true
    At-Spawn:
      # Use separate values for players at spawn.
      enable: false
      deny-elytra-usage: false
      radius: 3000
      speed-old-chunks: 1.0
      speed-new-chunks: 0.8
      deny-elytra-on-low-TPS: true
      deny-elytra-TPS: 10.0
      also-remove-elytra-on-low-TPS: true
    Global-Settings:
      # Global settings. If nothing else is enabled, this will be used for all environments.
      enable: true
      deny-elytra-usage: false
      speed-old-chunks: 1.81
      speed-new-chunks: 1.81
      enable-bursting: true
      burst-speed-old-chunks: 5.0
      burst-speed-old-chunk-TPS: 18.0
      burst-speed-new-chunks: 3.12
      burst-speed-new-chunk-TPS: 19.0
      deny-elytra-on-low-TPS: true
      deny-elytra-TPS: 12.0
      also-remove-elytra-on-low-TPS: true
    Nether-Ceiling:
      # Use separate values for players above the nether ceiling.
      enable: true
      deny-elytra-usage: false
      speed-old-chunks: 0.5
      speed-new-chunks: 0.5
      enable-bursting: true
      burst-speed-old-chunks: 1.0
      burst-speed-old-chunk-TPS: 18.0
      burst-speed-new-chunks: 1.0
      burst-speed-new-chunk-TPS: 18.0
      deny-elytra-on-low-TPS: true
      deny-elytra-TPS: 12.0
      also-remove-elytra-on-low-TPS: true
  packet-elytra-fly:
    # Patches the future/rusherhack/kamiblue 2b2t elytra fly exploit
    patch-packet-elytra-fly: true
    # Will only allow players to go about 85km/h on kami blue, and won't even work on rusherhack. Recommended to not go lower as there could be false positives.
    max-elytra-opens-per-10-seconds: 25
    # Configure message in lang folder.
    notify-player-to-disable-packetfly: true
    # If enabled, the plugin will not remove elytra from the player, but simply disconnect from the server.
    kick-instead-of-remove-elytra: false

##########
#  Chat  #
##########
chat:
  banned-regex:
    enable: false
    log: true
    # Prevents any message that starts with "This is a" and ends with "banned message"
    banned-regex:
      - ^This is a(.*)banned message
  banned-words:
    enable: false
    log: true
    case-sensitive: false
    banned-words:
      - what's 2+2
  character-limit:
    enable: true
    log: true
    char-limit: 128
  command-whitelist:
    # This will make it pretty much impossible to find your plugins as only the commands you specify will be able to work.
    # Allow bypass using permission: anarchyexploitfixes.commandwhitelistbypass
    # NOTE: Command tabcomplete suggestions after the '/' will still be sent to the client. There is sadly currently no method to filter these suggestions in 1.12.
    #       If you're on 1.12+ and want to enable tab-completion, use CommandWhitelist: https://github.com/YouHaveTrouble/CommandWhitelist
    #       Otherwise set 'tab-complete' to -1 in spigot.yml.
    enable: false
    # Only enable if you have problems with plugins not properly registering commands.
    # THIS IS NOT A 'BETTER WAY TO DO IT'!
    use-protocollib: false
    # Add all commands you want your players to be able to access (without the '/'). Not case sensitive.
    whitelisted-commands:
      - help
      - vote
      - kill
      - discord
      - togglechat
      - toggleconnectionmsgs
      - toggletells
      - togglewhispering
      - toggleprivatemsgs
      - ignore
      - ignorelist
      - ignorehard
      - toggledeathmsg
      - dmt
      - worldstats
      - stats
      - tps
      - msg
      - whisper
      - w
      - m
      - t
      - pm
      - tell
      - r
      - reply
      - last
    # Add all subcommands you don't want your players to be able to access. Case sensitive!
    blacklisted-subcommands:
      - help about
      - vote List
      - vote Best
      - vote Total
      - worldstats reload
      - stats reload
  prevent-spam:
    enable: false
    # Bit spammy, intended for debug
    log: false
    # Notifies players to slow down when spamming
    notify-player: false
    # Global limit (Messages per X seconds)
    anti-spam-time: 1
    # How many messages should we allow to send in X seconds
    anti-spam-check-time: 30
    # How long a player should wait before being able to send another exact same message
    anti-spam-word-time: 60
    # The percentage of similarity to previously sent messages for it to count as spam
    anti-spam-word-similarity-percentage: 94.8
    lenient-word-check:
      # Will not count messages as word spam that are shorter than or equal to the length of the configured limit.
      enable: true
      message-character-limit: 10
    # ~1 message every 3 seconds if constantly spamming
    anti-spam-messages-per-time: 10
    anti-spam-commands:
      enable: false
      log: true
      anti-spam-command-time: 1
      # Exclude commands from antispam.
      use-whitelist: true
      whitelisted-commands:
        - msg
        - message
        - w
        - whisper
        - tell
        - r
        - reply
        - /f
      banned-subcommands:
        - msg Notch
        - f perms
  links:
    prevent-sending:
      enable: false
      log: true
      only-for-players-around-spawn: true
      spawn-radius: 1000
      link-regex:
        - (https?://(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?://(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})
        - '[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z()]{1,6}\b([-a-zA-Z()@:%_+.~#?&/=]*)'
      more-lenient-link-check:
        enable: true
        # Won't get triggered by just the word discord and dc
        exemptions:
          - discord
          - dc
    prevent-spamming:
      enable: true
      log: true
      only-for-players-around-spawn: true
      spawn-radius: 1000
      delay-until-next-link-in-seconds: 300
      link-regex:
        - (https?://(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?://(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})
        - '[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z()]{1,6}\b([-a-zA-Z()@:%_+.~#?&/=]*)'
      more-lenient-link-check:
        enable: true
        exemptions:
          - discord
          - dc
  replace-@: true
  prevent-unicode-dot: true
  fix-ChatCo-ignore-bug: false

###################
#  Miscellaneous  #
###################
misc:
  say-command-format: '&7Server: &6%message%'
  join-leave-messages:
    # If you want to hide yourself or someone else when logging into the game,
    # use these permissions: anarchyexploitfixes.silentJoin, anarchyexploitfixes.silentLeave
    enable: true
    # default mode of /toggleconnectionmsgs
    connection-messages-on-by-default: true
    show-in-console: false
    first-join-messages:
      # Configure message in lang folder.
      enable: false
      show-in-console: true
  # Enable the /aef kickphrase <phrase> command.
  enable-kickphrase-command: false
  kicks:
    # Configure mask message in lang folder.
    mask-kick-messages: false
    prevent-spam-kick:
      # Cancels the kick for specific kick messages.
      enable: false
      kick-messages-to-listen-to:
        - Kicked for spamming
        - Stop spamming!

##################
#  1b1t Options  #
##################
1b1t-options:
  # Disables NoCheatPlus for geyser players.
  # Requires NoCheatPlus and Floodgate.
  disable-ncp-geyser: false
  distance-away-to-teleport:
    enable: false
    distance-in-blocks: 5000
    teleport-commands:
      - tpa
      - tpahere
      - call
      - ecall
      - etpa
      - tpask
      - etpask
    excluded-worlds:
      - world_the_end
      - exampleworld2
  make-specific-commands-hurt-you:
    enable: false
    damage-amount: 10
    hurt-commands:
      - tpa
  1b1t-place-bedrock:
    # Allow placing bedrock within certain y-levels.
    enable: false
    overworld:
      placing-allowed: true
      upper-y-limit: 319
      lower-y-limit: 10
    nether:
      placing-allowed: true
      upper-y-limit: 122
      lower-y-limit: 10
    end:
      placing-allowed: false
      upper-y-limit: 80
      lower-y-limit: 0
  # Enable 1b1t Slow!Dupe - 5% chance of duplicating an item by punching an itemframe
  enable-slowdupe: false
  use-spark-health: false
  nick-reset-only: false

```

</details>

## Optimization Guide

You can find an optimization guide at the file GUIDE.md

[comment]: <> (## Missing features)

[comment]: <> (* My modified version of John's god mode patch - Was removed because the original code was so shit that when reloaded)

[comment]: <> (  with plugman all the players will get kicked, aswell as breaking support for anything other than 1.12.2. Please use my)

[comment]: <> (  standalone plugin for this &#40;1.12.2 only&#41;: https://github.com/moom0o/AntiGodMode. I have another god mode patch but I'm)

[comment]: <> (  not sure if it works.)

## Probably won't be added

* Auto-updater, because you shouldn't trust me and instead read the code yourself.

## Stars over time

[![Stargazers over time](https://starchart.cc/moom0o/AnarchyExploitFixes.svg)](https://starchart.cc/moom0o/AnarchyExploitFixes)
